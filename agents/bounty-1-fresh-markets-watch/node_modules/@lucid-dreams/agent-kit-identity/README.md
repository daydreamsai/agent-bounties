# @lucid-dreams/agent-kit-identity

Helpers for wiring ERC-8004 trust metadata and registry flows into Lucid agents.
This package extracts the identity utilities that previously shipped inside
`@lucid-dreams/agent-kit`, so HTTP surfaces can stay lean while agents that need
registry access pull in the heavier dependencies on demand.

## Highlights

- Normalize domains and addresses for ERC-8004 interoperability.
- Build CAIP-10 registration entries and bootstrap static trust descriptors.
- Create lightweight viem clients from environment variables on demand.
- Register, update, and resolve agent identity records against ERC-8004
  registries.
- Produce domain ownership signatures (`signAgentDomainProof`) for publishing in
  manifests.
- High-level `bootstrapIdentity` helper for synthesizing trust config with
  optional auto-registration and fallbacks.

## Installation

```bash
bun add @lucid-dreams/agent-kit-identity
```

## Usage

```ts
import {
  createIdentityRegistryClient,
  bootstrapIdentity,
  signAgentDomainProof,
  normalizeDomain,
} from "@lucid-dreams/agent-kit-identity";

const client = createIdentityRegistryClient({
  address: "0xRegistry",
  chainId: 84532,
  publicClient,
  walletClient,
});

const record = await client.resolveByDomain("agent.example.com");

const { trust } = await bootstrapIdentity({
  domain: "agent.example.com",
  registryAddress: "0xRegistry",
  chainId: 84532,
  publicClient,
  walletClient,
});
```

> **Note:** These helpers rely on optional viem adapters. If you plan to call
> `makeViemClientsFromEnv` or `bootstrapIdentity` with `makeClients`, ensure the
> `viem` package is installed in your workspace.
